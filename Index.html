<!doctype html>
<html lang="es" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <title>PokeMarket - Inicio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5.3 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- CSS global compartido -->
  <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

<!-- NAVBAR PRINCIPAL INDEX -->
<nav class="navbar navbar-expand-lg navbar-main shadow-sm">
  <div class="container">

    <!-- Brand izquierda -->
    <a class="navbar-brand d-flex align-items-center gap-2" href="Index.html">
      <span class="sanaball-logo"></span>
      <span class="brand-text">PokeMarket</span>
    </a>

    <!-- Botón hamburguesa móvil -->
    <button class="navbar-toggler" type="button"
            data-bs-toggle="collapse" data-bs-target="#mainNavbar"
            aria-controls="mainNavbar" aria-expanded="false"
            aria-label="Mostrar navegación">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Contenido colapsable -->
    <div class="collapse navbar-collapse" id="mainNavbar">
      <!-- Menú -->
      <ul class="navbar-nav ms-3 nav-links">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="Index.html">Inicio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Mercado</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Colección</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Comunidad</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Ruleta</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Gradear</a>
        </li>
        <li class="nav-item d-lg-none">
          <a class="nav-link" href="Registro.html">Registro</a>
        </li>
      </ul>

      <!-- Zona derecha -->
      <div class="ms-auto d-flex align-items-center gap-3 flex-wrap justify-content-end">

        <!-- Botón Registro en escritorio -->
        <a href="Registro.html"
           class="btn btn-sm btn-outline-light d-none d-lg-inline-flex align-items-center gap-1">
          <i class="bi bi-plus-circle"></i>
          <span>Registro</span>
        </a>

        <!-- Switch claro/oscuro (fuera del dropdown) -->
        <div class="d-flex align-items-center gap-2 order-1 order-lg-0">
          <i class="bi bi-sun small text-warning"></i>
          <div class="form-check form-switch mb-0">
            <input class="form-check-input theme-switch" type="checkbox" id="darkModeSwitch"
                   aria-label="Cambiar entre modo claro y oscuro">
          </div>
          <i class="bi bi-moon-stars small text-secondary-emphasis"></i>
        </div>

        <!-- Dropdown perfil -->
        <div class="dropdown order-0 order-lg-1">
          <button class="btn btn-profile d-flex align-items-center"
                  type="button"
                  id="profileDropdown"
                  data-bs-toggle="dropdown"
                  aria-expanded="false">
            <img src="img/avatars/pokeball.png"
                 alt="Avatar"
                 class="avatar-navbar me-2" id="navbarAvatar">
            <span class="d-none d-sm-inline user-name" id="navbarUserName">
              Entrenador
            </span>
            <i class="bi bi-caret-down-fill ms-1 small d-none d-sm-inline"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm"
              aria-labelledby="profileDropdown">
            <li class="px-3 py-2">
              <div class="d-flex align-items-center">
                <img src="img/avatars/pokeball.png"
                     alt="Avatar"
                     class="avatar-navbar me-2" id="dropdownAvatar">
                <div class="min-w-0">
                  <div class="fw-semibold small text-truncate" id="dropdownUserName">Entrenador</div>
                  <div class="text-muted xsmall text-truncate" id="dropdownUserEmail">
                    entrenador@pokemarket.com
                  </div>
                </div>
              </div>
            </li>
            <li><hr class="dropdown-divider my-1"></li>
            <li>
              <a class="dropdown-item small" href="#">
                <i class="bi bi-person-badge me-2"></i>Ver perfil
              </a>
            </li>
            <li>
              <a class="dropdown-item small" href="InicioSesion.html">
                <i class="bi bi-box-arrow-right me-2"></i>Cerrar sesión
              </a>
            </li>
          </ul>
        </div>

      </div>
    </div>
  </div>
</nav>

<!-- Aquí luego iría el contenido del Index -->

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Modo claro/oscuro + cargar datos de usuario en navbar
document.addEventListener('DOMContentLoaded', () => {
  const html = document.documentElement;
  const switchElement = document.getElementById('darkModeSwitch');

  // Tema guardado
  const savedTheme = localStorage.getItem('bsTheme') || 'light';
  html.setAttribute('data-bs-theme', savedTheme);
  if (switchElement) {
    switchElement.checked = savedTheme === 'dark';
    switchElement.addEventListener('change', function () {
      const theme = this.checked ? 'dark' : 'light';
      html.setAttribute('data-bs-theme', theme);
      localStorage.setItem('bsTheme', theme);
    });
  }

  // Cargar datos usuario desde localStorage
  const name = localStorage.getItem('pm_user_name') || 'Entrenador';
  const email = localStorage.getItem('pm_user_email') || 'entrenador@pokemarket.com';
  const avatar = localStorage.getItem('pm_user_avatar') || 'img/avatars/pokeball.png';

  const navbarUserName = document.getElementById('navbarUserName');
  const dropdownUserName = document.getElementById('dropdownUserName');
  const dropdownUserEmail = document.getElementById('dropdownUserEmail');
  const navbarAvatar = document.getElementById('navbarAvatar');
  const dropdownAvatar = document.getElementById('dropdownAvatar');

  if (navbarUserName) navbarUserName.textContent = name;
  if (dropdownUserName) dropdownUserName.textContent = name;
  if (dropdownUserEmail) dropdownUserEmail.textContent = email;
  if (navbarAvatar) navbarAvatar.src = avatar;
  if (dropdownAvatar) dropdownAvatar.src = avatar;
});
</script>

</body>
</html>

